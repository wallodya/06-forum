(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function c(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=c(r);fetch(r.href,a)}})();const O="modulepreload",$=function(u){return"/"+u},B={},V=function(e,c,i){return!c||c.length===0?e():Promise.all(c.map(r=>{if(r=$(r),r in B)return;B[r]=!0;const a=r.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${f}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":O,a||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),a)return new Promise((b,n)=>{h.addEventListener("load",b),h.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};class s{constructor(e,c,i,r,a){this.tag=e!=null?e:"div",this.classList=c!=null?c:[],this.attrList=i!=null?i:{},this.text=r!=null?r:"",this.children=a!=null?a:[]}__init__(){var c;const e=document.createElement(this.tag);for(let i in this.attrList)e.setAttribute(i,(c=this.attrList[i])!=null?c:null);for(let i of this.classList)e.classList.add(i);e.innerText=this.text;for(let i of this.children)e.append(i);return e}}class p extends s{constructor(e,c=["container-flex-column"],i={}){super("div",c,i,null,e)}}class k extends s{constructor(e,c,i,r,a){switch(i=i!=null?i:[],e=e!=null?e:"primary",e){case"primary":{i=["button-primary",...i];break}case"secondary":{i=["button-secondary",...i];break}default:i=["button-primary",...i]}super("button",i,r,c!=null?c:"Submit",a),this.type=e!=null?e:"primary"}}class T extends p{constructor(e,c,i=!1,r=!1){let a=[];const f=new s("div",["avatar-header"]).__init__();f.style.background=`center/contain no-repeat url(${e.avatarLink})`,a.push(f);const h=new s("p",["ff-body","fs-s","fw-regular","text-primary-100"],null,e.userName).__init__(),b=new s("p",["ff-body","fs-s","fw-light","text-primary-40"],null,"online").__init__(),n=new p([h,b],["container-flex-column","badge-legend-container"]).__init__(),o=new s("p",["ff-body","fs-s","fw-bold","text-accent-60"],null,"banned").__init__(),l=new k("primary","Del",["delete-user-button","fs-s"]).__init__(),t=[];if(i&&t.push(l),e.isBanned&&t.push(o),t)var d=new p(t,["container-flex-column","badge-info-container"]).__init__();a=a.concat([n,d]),super(a,["card-round","container-flex-row","full-width","user-badge-admin"],c)}}class M extends s{constructor(e,c=[]){c.push("input-field"),super("input",c,e,null,null)}}class W extends s{constructor(e){super("label",["input-label","fs-s","fw-bold","text-primary-60","full-width"],{for:e.name},e.placeholder,null)}}class A extends s{constructor(e="",c=[],i=[],r={},a="Submit"){let f=[];const h=new s("h1",["ff-heading","fs-xl","fw-bold","text-gradient"],null,e).__init__();e&&f.push(h);let b=!0;for(let o of c){const l=new W(o).__init__(),t=new M(o).__init__();b||(l.classList.add("label-unused"),t.classList.add("input-unused")),b=!1,f.push(l),f.push(t),l.style.marginBottom="-1rem",l.style.opacity="0",t.addEventListener("input",()=>{l.classList.remove("label-unused"),t.classList.remove("input-unused"),l.style.opacity="1",t.value===""&&(l.style.opacity="0"),t.checkValidity()||(t.validity.tooShort?t.setCustomValidity("Should be 4 symbols or longer"):t.validity.patternMismatch?t.setCustomValidity("Input contains restricted characters"):t.setCustomValidity(""),t.reportValidity())})}const n=new s("input",["button-primary"],{type:"submit",value:a}).__init__();f.push(n),super("form",["container-flex-columnn","login-form",...i],r,null,f)}}const H={"000001":{userName:"wallodya",name:"Vladimir",email:"qwerty@test.com",isAdmin:!0,avatarLink:"../lib/img/default_prof_pic.png",friendList:["000002","000003","000004","000005"],isBanned:!0},"000002":{userName:"user123",name:"John",email:"abc@test.com",isAdmin:!1,avatarLink:"../lib/img/default_prof_pic.png",friendList:["000001","000003","000004","000005"],isBanned:!0},"000003":{userName:"_ivan_",name:"\u0418\u0432\u0430\u043D \u0418\u0432\u0430\u043D\u043E\u0432",email:"ivan4321@test.com",isAdmin:!1,avatarLink:"../lib/img/default_prof_pic.png",friendList:["000001","000002","000004","000005"],isBanned:!0},"000004":{userName:"random_user",name:"John Smith",email:"qwerty@test.com",isAdmin:!1,avatarLink:"../lib/img/default_prof_pic.png",friendList:["000001","000002","000003","000005"],isBanned:!0},"000005":{userName:"Dude",name:"\u0418\u043C\u044F \u0424\u0430\u043C\u0438\u043B\u0438\u044F",email:"qwerty@test.com",isAdmin:!1,avatarLink:"../lib/img/default_prof_pic.png",friendList:["000001","000002","000003","000004"],isBanned:!0}},S={},j=30;for(let u=6;u<j;u++){const e=("000000"+u).slice(-6);console.log(e),S[e]={userName:`_${e}_`,name:e+"'s name",email:Math.floor(Math.random()*1e3)+"@test.com",isAdmin:!1,avatarLink:"../lib/img/default_prof_pic.png",friendList:[("000000"+(u-1)).slice(-6),("000000"+(u-2)).slice(-6),("000000"+(u-3)).slice(-6),("000000"+(u-4)).slice(-6),("000000"+(u-5)).slice(-6)],isBanned:!!Math.floor(Math.random()+1)}}console.log("auto generated users:");console.dir(S);const _={...H,...S},y="000001";V(()=>Promise.resolve({}),["assets/header.ce6a2799.css"]);const I=document.getElementById("root"),v=document.createElement("div"),F=document.createElement("div"),P=document.createElement("div"),C=document.createElement("div");v.setAttribute("class","__page-content-center");F.setAttribute("class","__page-content-wrap");P.setAttribute("class","__page-header-wrap");C.setAttribute("class","__page-wrap");const J=u=>{const e=(n=!1,o=location.pathname)=>{var m;let[,l,t]=(m=/(\/[A-z]+)(\d{6})/g.exec(o))!=null?m:[,o,null];console.log(`rendering path: ${l}, userId in url: ${t}`);let d="";switch(l){case"/":{u.isUser?d=e(!1,"/user"):d=e(!1,"/login");return}case"/login":{d=i();break}case"/registr":{d=r();break}case"/user":{d=a(t);break}case"/profile":{if(y!=t&&!_[y].isAdmin){console.log("not owner"),e(!1,"/login");return}else d=f(t);break}case"/admin":{if(console.log(`User ${y} tries to render an admin page. isAdmin: ${_[y].isAdmin}`),_[y].isAdmin)console.log("Permission granted"),d=h();else{console.log("Permission denied"),e(!1,"/login");return}break}default:d=b()}n||history.pushState(null,"",`${location.origin}${o}`),v.style.opacity="0",setTimeout(()=>{v.innerHTML="",v.append(d),v.style.opacity="1"},100)},c=n=>{let o=!!n;const l=_[n],t=new s("div",["container-flex-row-header"]).__init__(),d=new k("primary","Login").__init__();if(l.isAdmin){var m=new s("button",["button-secondary-admin"],null,"admin").__init__();m.onclick=()=>{e(!1,"/admin")},t.append(m)}if(o){var w=new s("p",["text-primary-100","fw-regular","fs-m","ff-body","username-header"],null,l.userName).__init__(),g=new s("div",["avatar-header"],null).__init__();g.style.background=`center/contain no-repeat url(${l.avatarLink})`,d.innerText="Logout",g.onclick=()=>{e(!1,"/profile"+n)},w.onclick=()=>{e(!1,"/user"+n)},t.append(w,g,d)}else d.innerText="Login",d.style.marginLeft="auto",t.append(d);return d.onclick=()=>{o?(w.style.scale="0",l.isAdmin&&(m.style.scale="0"),g.style.scale="0",d.innerText="Login",o=!1,e(!1,"/")):(w.style.scale="1",l.isAdmin&&(m.style.scale="1"),g.style.scale="1",d.innerText="Logout",o=!0,e(!1,"/login"))},t},i=()=>{const n=new A("Login",[{type:"text",placeholder:"Login",name:"login",minlength:"4",maxlength:"15",pattern:"[A-z0-9]{4,15}",title:"Should contain from 4 to 15 characters",required:""},{type:"password",placeholder:"Password",name:"password",minlength:"4",maxlength:"15",pattern:"[A-z0-9]{4,15}",title:"Should contain from 4 to 15 characters",required:""}]).__init__();n.onsubmit=t=>{t.preventDefault(),console.log(n.login.value,n.password.value)};const o=new k("secondary","Create account").__init__();return o.onclick=()=>{e(!1,"/registr")},new p([n,o],["container-flex-column","container-login-form","card"]).__init__()},r=()=>{const n=new A("Create account",[{type:"text",placeholder:"Login",name:"login",minlength:"4",maxlength:"15",pattern:"[A-z0-9]{4,15}",title:"Should contain from 4 to 15 characters",required:""},{type:"text",placeholder:"Full name",name:"name",minlength:"4",maxlength:"20",pattern:"[A-z]{4,20}",title:"Should contain from 4 to 15 characters",required:""},{type:"email",placeholder:"e-mail",name:"email",minlength:"4",maxlength:"20",title:"Should contain from 4 to 15 characters",required:""},{type:"password",placeholder:"Password",name:"password",minlength:"4",maxlength:"15",pattern:"[A-z0-9]{4,15}",title:"Should contain from 4 to 15 characters",required:""},{type:"password",placeholder:"Confirm password",name:"passwordConfirm",minlength:"4",maxlength:"15",pattern:"[A-z0-9]{4,15}",title:"Should contain from 4 to 15 characters",required:""}],["container-flex-column","container-login-form","login-form","card"]).__init__();return n.onsubmit=o=>{o.preventDefault(),console.log(n.login.value,n.name.value,n.email.value,n.password==n.passwordConfirm.value)},n},a=n=>{const o=y==n,l=_[n];console.log(`Is owner: ${o}`);const t=new s("div",["avatar-profile"]).__init__();t.style.background=`center/contain no-repeat url(${l.avatarLink})`;const d=new s("p",["ff-body","fs-l","fw-bold","text-primary-100","username-profile"],null,l.userName).__init__(),m=new s("p",["ff-body","fs-m","fw-regular","text-primary-60"],null,l.email).__init__(),w=new p([d,m],["container-flex-column","user-legend-container"]).__init__(),g=new p([t,w],["container-flex-row","card-round","full-width","margin-top-m"]).__init__(),x=new s("h2",["ff-heading","fs-l","fw-bold","text-gradient","full-width"],null,"Friends").__init__(),E=new s("div",["container-grid-auto-columns","full-width"]).__init__(),U=new p([x,E],["container-flex-column","card-round","full-width"]).__init__();for(let L of _[n].friendList){const N=new T(_[L],{id:L},!1).__init__();E.append(N),N.onclick=()=>{e(!1,"/user"+L)}}const z=new s("h2",["ff-heading","fs-l","fw-bold","text-gradient"],null,"Feed").__init__(),D=new s("div",[]).__init__(),q=new p([z,D],["news-feed-container-user","card-round","full-width"]).__init__();return new p([g,U,q]).__init__()},f=n=>{const o=_[n],l=new s("div",["avatar-profile"]).__init__();l.style.background=`center/contain no-repeat url(${o.avatarLink})`;const t=new k("primary","Change avatar").__init__(),d=new p([new p([l,t]).__init__()],["card-round","margin-top-m"]).__init__(),m=new A("Edit",[{type:"text",value:o.name,readonly:""},{type:"text",value:o.userName,placeholder:"Login",name:"login",minlength:"4",maxlength:"15",pattern:"[A-z]{4,15}",title:"Should contain from 4 to 15 characters",required:""},{type:"email",value:o.email,placeholder:"e-mail",name:"email",minlength:"4",maxlength:"20",title:"Should contain from 4 to 15 characters",required:""}],["container-flex-column","login-form","card-round"]).__init__();return m.onsubmit=g=>{g.preventDefault(),console.log(m.login.value,m.email.value)},new p([d,m]).__init__()},h=()=>{const n=new s("h2",["ff-heading","fs-l","fw-bold","text-gradient","full-width"],null,"All users").__init__(),o=new s("div",["container-grid-auto-columns","full-width"]).__init__(),l=new p([n,o],["container-flex-column","card-round","margin-top-m","full-width"]).__init__();for(let g in _){const x=new T(_[g],{id:g},!0).__init__();console.log(g),x.onclick=()=>{e(!1,"/user"+g)},o.append(x)}const t=new s("h2",["ff-heading","fs-l","fw-bold","text-gradient","full-width"],null,"Deleted Users").__init__(),d=new s("div",["container-grid","full-width"]).__init__(),m=new p([t,d],["conatiner-flex-column","card-round","full-width"]).__init__();return new p([l,m],["container-flex-column"]).__init__()},b=()=>{const n=new s("h1",["container-flex-columns","ff-heading","fs-xxl","fw-bold","text-gradient","full-width"],null,`404
Page doesn't exist`).__init__();return n.style.marginTop="var(--header-height)",n};P.append(c(u)),F.append(v),C.append(P,F),e(),onpopstate=()=>{console.log("popState fired"),e(!0)},I.append(C)},R=y;J(R);
